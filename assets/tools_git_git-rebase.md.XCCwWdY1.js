import{_ as s,o as a,c as n,a8 as l}from"./chunks/framework.Qf1t7Yq5.js";const E=JSON.parse('{"title":"git rebase","description":"","frontmatter":{},"headers":[],"relativePath":"tools/git/git-rebase.md","filePath":"tools/git/git-rebase.md","lastUpdated":1701688734000}'),p={name:"tools/git/git-rebase.md"},o=l(`<h1 id="git-rebase" tabindex="-1">git rebase <a class="header-anchor" href="#git-rebase" aria-label="Permalink to &quot;git rebase&quot;">​</a></h1><h3 id="git-rebase能够将分叉的分支重新合并-下面主要介绍它的两个使用场景" tabindex="-1">git rebase能够将分叉的分支重新合并，下面主要介绍它的两个使用场景 <a class="header-anchor" href="#git-rebase能够将分叉的分支重新合并-下面主要介绍它的两个使用场景" aria-label="Permalink to &quot;git rebase能够将分叉的分支重新合并，下面主要介绍它的两个使用场景&quot;">​</a></h3><h4 id="场景一-本地与远端同一分支提交历史不一致" tabindex="-1">场景一：本地与远端同一分支提交历史不一致 <a class="header-anchor" href="#场景一-本地与远端同一分支提交历史不一致" aria-label="Permalink to &quot;场景一：本地与远端同一分支提交历史不一致&quot;">​</a></h4><blockquote><p>方式一</p></blockquote><p>多个人在同一个分支上协作时，出现冲突是很正常的，比如现在有一个项目由我和A一同开发。</p><p>我在修复了一个bug以后准备提交</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:ganlin</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> add</span><span style="color:#C3E88D;"> models/paper.go</span></span>
<span class="line"><span style="color:#FFCB6B;">HowiedeiMac:ganlin</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> commit</span><span style="color:#C3E88D;"> -m</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">fix a bug</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">master </span><span style="color:#F78C6C;">8</span><span style="color:#BABED8;">b76654</span><span style="color:#89DDFF;">]</span><span style="color:#BABED8;"> fix a bug</span></span>
<span class="line"><span style="color:#FFCB6B;"> 1</span><span style="color:#C3E88D;"> file</span><span style="color:#C3E88D;"> changed,</span><span style="color:#F78C6C;"> 3</span><span style="color:#C3E88D;"> insertions</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">+</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">,</span><span style="color:#F78C6C;"> 3</span><span style="color:#C3E88D;"> deletions</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">-</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>现在准备推送到远端</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:ganlin</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> push</span><span style="color:#C3E88D;"> origin</span><span style="color:#C3E88D;"> master</span></span>
<span class="line"><span style="color:#FFCB6B;">To</span><span style="color:#C3E88D;"> https://gitee.com/greenhn/ganlin.git</span></span>
<span class="line"><span style="color:#89DDFF;"> !</span><span style="color:#89DDFF;"> [</span><span style="color:#BABED8;">rejected</span><span style="color:#89DDFF;">]</span><span style="color:#FFCB6B;">        master</span><span style="color:#BABED8;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;"> master</span><span style="color:#BABED8;"> (fetch </span><span style="color:#C3E88D;">first</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">error:</span><span style="color:#C3E88D;"> failed</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> push</span><span style="color:#C3E88D;"> some</span><span style="color:#C3E88D;"> refs</span><span style="color:#C3E88D;"> to</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">https://gitee.com/greenhn/ganlin.git</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">hint:</span><span style="color:#C3E88D;"> Updates</span><span style="color:#C3E88D;"> were</span><span style="color:#C3E88D;"> rejected</span><span style="color:#C3E88D;"> because</span><span style="color:#C3E88D;"> the</span><span style="color:#C3E88D;"> remote</span><span style="color:#C3E88D;"> contains</span><span style="color:#C3E88D;"> work</span><span style="color:#C3E88D;"> that</span><span style="color:#C3E88D;"> you</span><span style="color:#C3E88D;"> do</span></span>
<span class="line"><span style="color:#FFCB6B;">hint:</span><span style="color:#C3E88D;"> not</span><span style="color:#C3E88D;"> have</span><span style="color:#C3E88D;"> locally.</span><span style="color:#C3E88D;"> This</span><span style="color:#C3E88D;"> is</span><span style="color:#C3E88D;"> usually</span><span style="color:#C3E88D;"> caused</span><span style="color:#C3E88D;"> by</span><span style="color:#C3E88D;"> another</span><span style="color:#C3E88D;"> repository</span><span style="color:#C3E88D;"> pushing</span></span>
<span class="line"><span style="color:#FFCB6B;">hint:</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> the</span><span style="color:#C3E88D;"> same</span><span style="color:#C3E88D;"> ref.</span><span style="color:#C3E88D;"> You</span><span style="color:#C3E88D;"> may</span><span style="color:#C3E88D;"> want</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> first</span><span style="color:#C3E88D;"> integrate</span><span style="color:#C3E88D;"> the</span><span style="color:#C3E88D;"> remote</span><span style="color:#C3E88D;"> changes</span></span>
<span class="line"><span style="color:#FFCB6B;">hint:</span><span style="color:#BABED8;"> (e.g., </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">git pull ...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;">) before pushing again.</span></span>
<span class="line"><span style="color:#FFCB6B;">hint:</span><span style="color:#C3E88D;"> See</span><span style="color:#C3E88D;"> the</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">Note about fast-forwards</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> in</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">git push --help</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> for</span><span style="color:#C3E88D;"> details.</span></span></code></pre></div><p>push失败了，说明A在我之前已经提交了，我本地master分支的提交历史已经落后远端了，需要先pull一下，与远端同步后才能push</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:ganlin</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> pull</span></span>
<span class="line"><span style="color:#FFCB6B;">remote:</span><span style="color:#C3E88D;"> Enumerating</span><span style="color:#C3E88D;"> objects:</span><span style="color:#F78C6C;"> 14</span><span style="color:#C3E88D;">,</span><span style="color:#C3E88D;"> done.</span></span>
<span class="line"><span style="color:#FFCB6B;">remote:</span><span style="color:#C3E88D;"> Counting</span><span style="color:#C3E88D;"> objects:</span><span style="color:#F78C6C;"> 100</span><span style="color:#C3E88D;">%</span><span style="color:#BABED8;"> (14/14), done.</span></span>
<span class="line"><span style="color:#FFCB6B;">remote:</span><span style="color:#C3E88D;"> Compressing</span><span style="color:#C3E88D;"> objects:</span><span style="color:#F78C6C;"> 100</span><span style="color:#C3E88D;">%</span><span style="color:#BABED8;"> (8/8), done.</span></span>
<span class="line"><span style="color:#FFCB6B;">remote:</span><span style="color:#C3E88D;"> Total</span><span style="color:#F78C6C;"> 8</span><span style="color:#BABED8;"> (delta </span><span style="color:#F78C6C;">6</span><span style="color:#BABED8;">), reused 0 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">delta</span><span style="color:#F78C6C;"> 0</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">Unpacking</span><span style="color:#C3E88D;"> objects:</span><span style="color:#F78C6C;"> 100</span><span style="color:#C3E88D;">%</span><span style="color:#BABED8;"> (8/8), done.</span></span>
<span class="line"><span style="color:#FFCB6B;">From</span><span style="color:#C3E88D;"> https://gitee.com/greenhn/ganlin</span></span>
<span class="line"><span style="color:#FFCB6B;">   a1bc60a..b91f711</span><span style="color:#C3E88D;">  master</span><span style="color:#BABED8;">     -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;"> origin/master</span></span>
<span class="line"><span style="color:#FFCB6B;">Merge</span><span style="color:#C3E88D;"> made</span><span style="color:#C3E88D;"> by</span><span style="color:#C3E88D;"> the</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">recursive</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> strategy.</span></span>
<span class="line"><span style="color:#FFCB6B;"> controllers/deal_local_data.go</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;"> 14</span><span style="color:#C3E88D;"> +++++++++++---</span></span>
<span class="line"><span style="color:#FFCB6B;"> controllers/rtu_interface.go</span><span style="color:#89DDFF;">   |</span><span style="color:#FFCB6B;">  8</span><span style="color:#C3E88D;"> ++++----</span></span>
<span class="line"><span style="color:#FFCB6B;"> models/instrument_type.go</span><span style="color:#89DDFF;">      |</span><span style="color:#FFCB6B;">  3</span><span style="color:#C3E88D;"> +++</span></span>
<span class="line"><span style="color:#FFCB6B;"> models/rtu_interface.go</span><span style="color:#89DDFF;">        |</span><span style="color:#FFCB6B;">  3</span><span style="color:#C3E88D;"> +++</span></span>
<span class="line"><span style="color:#FFCB6B;"> 4</span><span style="color:#C3E88D;"> files</span><span style="color:#C3E88D;"> changed,</span><span style="color:#F78C6C;"> 21</span><span style="color:#C3E88D;"> insertions</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">+</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">,</span><span style="color:#F78C6C;"> 7</span><span style="color:#C3E88D;"> deletions</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">-</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>pull成功，现在使用git log看下一提交历史：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:ganlin</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> log</span><span style="color:#C3E88D;"> --oneline</span><span style="color:#C3E88D;"> --graph</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;">   f63ecbf </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">HEAD</span><span style="color:#BABED8;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;"> master</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> Merge branch </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">master</span><span style="color:#89DDFF;">&#39;</span><span style="color:#BABED8;"> of https://gitee.com/greenhn/ganlin</span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">\\</span><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> *</span><span style="color:#C3E88D;"> b91f711</span><span style="color:#BABED8;"> (origin/master, </span><span style="color:#C3E88D;">origin/HEAD</span><span style="color:#BABED8;">) 修正bug，优化内置通道配置</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;"> 8b76654</span><span style="color:#C3E88D;"> fix</span><span style="color:#C3E88D;"> a</span><span style="color:#C3E88D;"> bug</span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">/</span><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> a1bc60a 完善日报接口</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 9f73b5e 增加内置通道设置功能</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> a0d464e ...</span></span></code></pre></div><p>竟然分叉了！由于我本地master的提交历史和远端的master分支的提交历史不一致，所以git为我进行了自动合并，然后生成了一个新的提交历史（<code>f63ecbf Merge branch &#39;master&#39; of</code>）</p><p>对于部分强迫症来说这个不能接受的，不想看到分叉。</p><p>这个时候用<code>git rebase</code>就可以解决</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:ganlin</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> rebase</span></span>
<span class="line"><span style="color:#FFCB6B;">First,</span><span style="color:#C3E88D;"> rewinding</span><span style="color:#C3E88D;"> head</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> replay</span><span style="color:#C3E88D;"> your</span><span style="color:#C3E88D;"> work</span><span style="color:#C3E88D;"> on</span><span style="color:#C3E88D;"> top</span><span style="color:#C3E88D;"> of</span><span style="color:#C3E88D;"> it...</span></span>
<span class="line"><span style="color:#FFCB6B;">Applying:</span><span style="color:#C3E88D;"> fix</span><span style="color:#C3E88D;"> a</span><span style="color:#C3E88D;"> bug</span></span></code></pre></div><p>现在再查看一下提交历史：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:ganlin</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> log</span><span style="color:#C3E88D;"> --oneline</span><span style="color:#C3E88D;"> --graph</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 2e2b995 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">HEAD</span><span style="color:#BABED8;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;"> master</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> fix a bug</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> b91f711 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">origin/master,</span><span style="color:#C3E88D;"> origin/HEAD</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> 修正bug，优化内置通道配置</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> a1bc60a 完善日报接口</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 9f73b5e 增加内置通道设置功能</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> a0d464e ...</span></span></code></pre></div><p>完美解决，现在再push推送到远端：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:ganlin</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> push</span><span style="color:#C3E88D;"> origin</span><span style="color:#C3E88D;"> master</span></span>
<span class="line"><span style="color:#FFCB6B;">Enumerating</span><span style="color:#C3E88D;"> objects:</span><span style="color:#F78C6C;"> 7</span><span style="color:#C3E88D;">,</span><span style="color:#C3E88D;"> done.</span></span>
<span class="line"><span style="color:#FFCB6B;">Counting</span><span style="color:#C3E88D;"> objects:</span><span style="color:#F78C6C;"> 100</span><span style="color:#C3E88D;">%</span><span style="color:#BABED8;"> (7/7), done.</span></span>
<span class="line"><span style="color:#FFCB6B;">Delta</span><span style="color:#C3E88D;"> compression</span><span style="color:#C3E88D;"> using</span><span style="color:#C3E88D;"> up</span><span style="color:#C3E88D;"> to</span><span style="color:#F78C6C;"> 4</span><span style="color:#C3E88D;"> threads</span></span>
<span class="line"><span style="color:#FFCB6B;">Compressing</span><span style="color:#C3E88D;"> objects:</span><span style="color:#F78C6C;"> 100</span><span style="color:#C3E88D;">%</span><span style="color:#BABED8;"> (4/4), done.</span></span>
<span class="line"><span style="color:#FFCB6B;">Writing</span><span style="color:#C3E88D;"> objects:</span><span style="color:#F78C6C;"> 100</span><span style="color:#C3E88D;">%</span><span style="color:#BABED8;"> (4/4), 394 bytes </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> 394.00</span><span style="color:#C3E88D;"> KiB/s,</span><span style="color:#C3E88D;"> done.</span></span>
<span class="line"><span style="color:#FFCB6B;">Total</span><span style="color:#F78C6C;"> 4</span><span style="color:#BABED8;"> (delta </span><span style="color:#F78C6C;">3</span><span style="color:#BABED8;">), reused 0 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">delta</span><span style="color:#F78C6C;"> 0</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">remote:</span><span style="color:#C3E88D;"> Powered</span><span style="color:#C3E88D;"> By</span><span style="color:#C3E88D;"> Gitee.com</span></span>
<span class="line"><span style="color:#FFCB6B;">To</span><span style="color:#C3E88D;"> https://gitee.com/greenhn/ganlin.git</span></span>
<span class="line"><span style="color:#FFCB6B;">   b91f711..2e2b995</span><span style="color:#C3E88D;">  master</span><span style="color:#BABED8;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;"> master</span></span></code></pre></div><p>再次查看提交历史</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:ganlin</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> lg</span><span style="color:#C3E88D;"> --oneline</span><span style="color:#C3E88D;"> --graph</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 2e2b995 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">HEAD</span><span style="color:#BABED8;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;"> master,</span><span style="color:#C3E88D;"> origin/master,</span><span style="color:#C3E88D;"> origin/HEAD</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> fix a bug</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> b91f711 修正bug，优化内置通道配置</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> a1bc60a 完善日报接口</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 9f73b5e 增加内置通道设置功能</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> a0d464e ...</span></span></code></pre></div><p>现在远端master，远端head，本地master全部统一，问题解决。</p><blockquote><p>方式二</p></blockquote><p>直接执行： <code>git pull --rebase</code> 效果与上面是一致的，也是最近才发现，推荐使用</p><h4 id="场景二-不同分支之间的合并" tabindex="-1">场景二：不同分支之间的合并 <a class="header-anchor" href="#场景二-不同分支之间的合并" aria-label="Permalink to &quot;场景二：不同分支之间的合并&quot;">​</a></h4><p>由于老板突发奇想，要求开发一个新的功能。</p><p>先创建一个分支用于开发新功能：</p><p><code>git checkout -b feature</code></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> checkout</span><span style="color:#C3E88D;"> -b</span><span style="color:#C3E88D;"> feature</span></span>
<span class="line"><span style="color:#FFCB6B;">Switched</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> a</span><span style="color:#C3E88D;"> new</span><span style="color:#C3E88D;"> branch</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">feature</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> branch</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> feature</span></span>
<span class="line"><span style="color:#FFCB6B;">  master</span></span></code></pre></div><p>接下来修改newFunc.go，增加新的功能,并且保存提交</p><p><code>vim newFunc.go</code></p><p><code>git add newFunc.go</code></p><p><code>git commit -m &#39;add new func&#39;</code></p><p>现在查看一下提交</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> log</span><span style="color:#C3E88D;"> --oneline</span><span style="color:#C3E88D;"> --graph</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 4f58ab8 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">HEAD</span><span style="color:#BABED8;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;"> feature</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> add new func</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 94c134b </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">master</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> init base</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> branch</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> feature</span></span>
<span class="line"><span style="color:#FFCB6B;">  master</span></span></code></pre></div><p>现在新功能开发完毕，需要将它合并的主分支中。</p><blockquote><p>先尝试通过merge合并：</p></blockquote><p>首先切换到master分支</p><p><code>git checkout master</code></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> checkout</span><span style="color:#C3E88D;"> master</span></span>
<span class="line"><span style="color:#FFCB6B;">Switched</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> branch</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">master</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">Your</span><span style="color:#C3E88D;"> branch</span><span style="color:#C3E88D;"> is</span><span style="color:#C3E88D;"> up</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> date</span><span style="color:#C3E88D;"> with</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">origin/master</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.</span></span></code></pre></div><p>直接合并feature分支</p><p><code>git merge feature</code></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> merge</span><span style="color:#C3E88D;"> feature</span></span>
<span class="line"><span style="color:#FFCB6B;">Auto-merging</span><span style="color:#C3E88D;"> newFunc.go</span></span>
<span class="line"><span style="color:#FFCB6B;">CONFLICT</span><span style="color:#BABED8;"> (content): Merge conflict </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> newFunc.go</span></span>
<span class="line"><span style="color:#FFCB6B;">Automatic</span><span style="color:#C3E88D;"> merge</span><span style="color:#C3E88D;"> failed</span><span style="color:#89DDFF;">;</span><span style="color:#FFCB6B;"> fix</span><span style="color:#C3E88D;"> conflicts</span><span style="color:#C3E88D;"> and</span><span style="color:#C3E88D;"> then</span><span style="color:#C3E88D;"> commit</span><span style="color:#C3E88D;"> the</span><span style="color:#C3E88D;"> result.</span></span></code></pre></div><p>竟然失败了，说明我两个分支之前的版本已经不同步了，需要手动合并冲突，再提交：</p><p>先查看冲突文件：<code>git status</code></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> status</span></span>
<span class="line"><span style="color:#FFCB6B;">On</span><span style="color:#C3E88D;"> branch</span><span style="color:#C3E88D;"> master</span></span>
<span class="line"><span style="color:#FFCB6B;">Your</span><span style="color:#C3E88D;"> branch</span><span style="color:#C3E88D;"> is</span><span style="color:#C3E88D;"> ahead</span><span style="color:#C3E88D;"> of</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">origin/master</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> by</span><span style="color:#F78C6C;"> 7</span><span style="color:#C3E88D;"> commits.</span></span>
<span class="line"><span style="color:#89DDFF;">  (</span><span style="color:#FFCB6B;">use</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">git push</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> publish</span><span style="color:#C3E88D;"> your</span><span style="color:#C3E88D;"> local</span><span style="color:#C3E88D;"> commits</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">You</span><span style="color:#C3E88D;"> have</span><span style="color:#C3E88D;"> unmerged</span><span style="color:#C3E88D;"> paths.</span></span>
<span class="line"><span style="color:#89DDFF;">  (</span><span style="color:#FFCB6B;">fix</span><span style="color:#C3E88D;"> conflicts</span><span style="color:#C3E88D;"> and</span><span style="color:#C3E88D;"> run</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">git commit</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">  (</span><span style="color:#FFCB6B;">use</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">git merge --abort</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> abort</span><span style="color:#C3E88D;"> the</span><span style="color:#C3E88D;"> merge</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Unmerged</span><span style="color:#C3E88D;"> paths:</span></span>
<span class="line"><span style="color:#89DDFF;">  (</span><span style="color:#FFCB6B;">use</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">git add &lt;file&gt;...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> mark</span><span style="color:#C3E88D;"> resolution</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">        both</span><span style="color:#C3E88D;"> modified:</span><span style="color:#C3E88D;">   newFunc.go</span></span></code></pre></div><p>打开文件，进行修改</p><p>原文件：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">func</span><span style="color:#C3E88D;"> NewFunc</span><span style="color:#89DDFF;">()</span><span style="color:#C3E88D;"> {</span></span>
<span class="line"><span style="color:#FFCB6B;">    //</span><span style="color:#BABED8;"> [!code </span><span style="color:#C3E88D;">--</span><span style="color:#BABED8;">]</span></span>
<span class="line"><span style="color:#FFCB6B;">    fmt.Println(</span><span style="color:#FFCB6B;">&quot;add new func&quot;</span><span style="color:#BABED8;">)  // </span><span style="color:#89DDFF;">[!</span><span style="color:#BABED8;">code ++</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">}</span></span></code></pre></div><p>修改后：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">func</span><span style="color:#C3E88D;"> NewFunc</span><span style="color:#89DDFF;">()</span><span style="color:#C3E88D;"> {</span></span>
<span class="line"><span style="color:#FFCB6B;">    fmt.Println(</span><span style="color:#FFCB6B;">&quot;add new func&quot;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">}</span></span></code></pre></div><p>现在通过add添加，然后commit提交</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> add</span><span style="color:#C3E88D;"> newFunc.go</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> commit</span><span style="color:#C3E88D;"> -m</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">merge master and feature</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">master </span><span style="color:#F78C6C;">562</span><span style="color:#BABED8;">ec58</span><span style="color:#89DDFF;">]</span><span style="color:#BABED8;"> merge master and feature</span></span></code></pre></div><p>现在在查看一下分支提交历史：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> log</span><span style="color:#C3E88D;"> --oneline</span><span style="color:#C3E88D;"> --graph</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;">   562ec58 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">HEAD</span><span style="color:#BABED8;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;"> master</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> merge master and feature</span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">\\</span><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;"> *</span><span style="color:#F78C6C;"> 4</span><span style="color:#C3E88D;">f58ab8</span><span style="color:#BABED8;"> (feature) add new func</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;"> 0e80f97</span><span style="color:#C3E88D;"> do</span><span style="color:#C3E88D;"> something</span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">/</span><span style="color:#BABED8;">  </span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 94c134b init base</span></span></code></pre></div><p>虽然合并成功，但是Master已经保存了合并历史，出现开叉了！对于强迫症患者来说肯定是不能接受的。</p><blockquote><p>通过rebase合并分支：</p></blockquote><p>现在将版本退回到合并前,也就是回退一个版本</p><p><code>git reset --hard head^</code></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> reset</span><span style="color:#C3E88D;"> --hard</span><span style="color:#C3E88D;"> head^</span></span>
<span class="line"><span style="color:#FFCB6B;">HEAD</span><span style="color:#C3E88D;"> is</span><span style="color:#C3E88D;"> now</span><span style="color:#C3E88D;"> at</span><span style="color:#F78C6C;"> 0</span><span style="color:#C3E88D;">e80f97</span><span style="color:#C3E88D;"> do</span><span style="color:#C3E88D;"> something</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> log</span><span style="color:#C3E88D;"> --oneline</span><span style="color:#C3E88D;"> --graph</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 0e80f97 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">HEAD</span><span style="color:#BABED8;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;"> master</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;"> do</span><span style="color:#FFCB6B;"> something</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 94c134b init base</span></span></code></pre></div><p>退回去了，现在是位于master分支的<code>init base</code>提交这里。</p><p>先切换回feature分支：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> checkout</span><span style="color:#C3E88D;"> feature</span></span>
<span class="line"><span style="color:#FFCB6B;">Switched</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> branch</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">feature</span><span style="color:#89DDFF;">&#39;</span></span></code></pre></div><p>在feature分支上执行: <code>git rebase master</code></p><p>这句命令的意识是：以master为基础，将feature分支上的修改增加到master分支上，并生成新的版本。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> rebase</span><span style="color:#C3E88D;"> master</span></span>
<span class="line"><span style="color:#FFCB6B;">First,</span><span style="color:#C3E88D;"> rewinding</span><span style="color:#C3E88D;"> head</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> replay</span><span style="color:#C3E88D;"> your</span><span style="color:#C3E88D;"> work</span><span style="color:#C3E88D;"> on</span><span style="color:#C3E88D;"> top</span><span style="color:#C3E88D;"> of</span><span style="color:#C3E88D;"> it...</span></span>
<span class="line"><span style="color:#FFCB6B;">Applying:</span><span style="color:#C3E88D;"> add</span><span style="color:#C3E88D;"> new</span><span style="color:#C3E88D;"> func</span></span>
<span class="line"><span style="color:#FFCB6B;">Using</span><span style="color:#C3E88D;"> index</span><span style="color:#C3E88D;"> info</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> reconstruct</span><span style="color:#C3E88D;"> a</span><span style="color:#C3E88D;"> base</span><span style="color:#C3E88D;"> tree...</span></span>
<span class="line"><span style="color:#FFCB6B;">M</span><span style="color:#C3E88D;">       newFunc.go</span></span>
<span class="line"><span style="color:#FFCB6B;">Falling</span><span style="color:#C3E88D;"> back</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> patching</span><span style="color:#C3E88D;"> base</span><span style="color:#C3E88D;"> and</span><span style="color:#F78C6C;"> 3</span><span style="color:#C3E88D;">-way</span><span style="color:#C3E88D;"> merge...</span></span>
<span class="line"><span style="color:#FFCB6B;">Auto-merging</span><span style="color:#C3E88D;"> newFunc.go</span></span>
<span class="line"><span style="color:#FFCB6B;">CONFLICT</span><span style="color:#BABED8;"> (content): Merge conflict </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> newFunc.go</span></span>
<span class="line"><span style="color:#FFCB6B;">error:</span><span style="color:#C3E88D;"> Failed</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> merge</span><span style="color:#C3E88D;"> in</span><span style="color:#C3E88D;"> the</span><span style="color:#C3E88D;"> changes.</span></span>
<span class="line"><span style="color:#FFCB6B;">Patch</span><span style="color:#C3E88D;"> failed</span><span style="color:#C3E88D;"> at</span><span style="color:#F78C6C;"> 0001</span><span style="color:#C3E88D;"> add</span><span style="color:#C3E88D;"> new</span><span style="color:#C3E88D;"> func</span></span>
<span class="line"><span style="color:#FFCB6B;">hint:</span><span style="color:#C3E88D;"> Use</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">git am --show-current-patch</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> see</span><span style="color:#C3E88D;"> the</span><span style="color:#C3E88D;"> failed</span><span style="color:#C3E88D;"> patch</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Resolve</span><span style="color:#C3E88D;"> all</span><span style="color:#C3E88D;"> conflicts</span><span style="color:#C3E88D;"> manually,</span><span style="color:#C3E88D;"> mark</span><span style="color:#C3E88D;"> them</span><span style="color:#C3E88D;"> as</span><span style="color:#C3E88D;"> resolved</span><span style="color:#C3E88D;"> with</span></span>
<span class="line"><span style="color:#FFCB6B;">&quot;git add/rm &lt;conflicted_files&gt;&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#C3E88D;"> then</span><span style="color:#C3E88D;"> run</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">git rebase --continue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">You</span><span style="color:#C3E88D;"> can</span><span style="color:#C3E88D;"> instead</span><span style="color:#C3E88D;"> skip</span><span style="color:#C3E88D;"> this</span><span style="color:#C3E88D;"> commit:</span><span style="color:#C3E88D;"> run</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">git rebase --skip</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span>
<span class="line"><span style="color:#FFCB6B;">To</span><span style="color:#C3E88D;"> abort</span><span style="color:#C3E88D;"> and</span><span style="color:#C3E88D;"> get</span><span style="color:#C3E88D;"> back</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> the</span><span style="color:#C3E88D;"> state</span><span style="color:#C3E88D;"> before</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">git rebase</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#C3E88D;"> run</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">git rebase --abort</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span></span></code></pre></div><p>失败了，原因很简单，两个分支修改个同一个文件，产生了冲突。所以先需要解决冲突：</p><p>打开冲突的文件，解决冲突</p><p>原文件：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">func</span><span style="color:#C3E88D;"> NewFunc</span><span style="color:#89DDFF;">()</span><span style="color:#C3E88D;"> {</span></span>
<span class="line"><span style="color:#FFCB6B;">    //</span><span style="color:#BABED8;"> [!code </span><span style="color:#C3E88D;">--</span><span style="color:#BABED8;">]</span></span>
<span class="line"><span style="color:#FFCB6B;">    fmt.Println(</span><span style="color:#FFCB6B;">&quot;add new func&quot;</span><span style="color:#BABED8;">)  // </span><span style="color:#89DDFF;">[!</span><span style="color:#BABED8;">code ++</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">}</span></span></code></pre></div><p>修改后：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">func</span><span style="color:#C3E88D;"> NewFunc</span><span style="color:#89DDFF;">()</span><span style="color:#C3E88D;"> {</span></span>
<span class="line"><span style="color:#FFCB6B;">    fmt.Println(</span><span style="color:#FFCB6B;">&quot;add new func&quot;</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#BABED8;">}</span></span></code></pre></div><p>现在通过add添加</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> add</span><span style="color:#C3E88D;"> newFunc.go</span></span></code></pre></div><p>现在是重点，之前的rebase其实只是完成了一半，由于出现冲突而终止，现在冲突解决，可以通过<code>git rebase —continue</code>继续完成之前的rebase操作。</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> rebase</span><span style="color:#C3E88D;"> --continue</span></span>
<span class="line"><span style="color:#FFCB6B;">Applying:</span><span style="color:#C3E88D;"> add</span><span style="color:#C3E88D;"> new</span><span style="color:#C3E88D;"> func</span></span></code></pre></div><p>rebase完成，再查看一下提交历史：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> log</span><span style="color:#C3E88D;"> --oneline</span><span style="color:#C3E88D;"> --graph</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> b2593e6 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">HEAD</span><span style="color:#BABED8;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;"> feature</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> add new func</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 0e80f97 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">master</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;"> do</span><span style="color:#FFCB6B;"> something</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 94c134b init base</span></span></code></pre></div><p>提交记录已经是一条完美的直线。现在切换到主分支master，将feather分支上的提交合并过来。</p><p><code>git checkout master</code></p><p><code>git merge feature</code></p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> checkout</span><span style="color:#C3E88D;"> master</span></span>
<span class="line"><span style="color:#FFCB6B;">Switched</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> branch</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">master</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">Your</span><span style="color:#C3E88D;"> branch</span><span style="color:#C3E88D;"> is</span><span style="color:#C3E88D;"> ahead</span><span style="color:#C3E88D;"> of</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">origin/master</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;"> by</span><span style="color:#F78C6C;"> 7</span><span style="color:#C3E88D;"> commits.</span></span>
<span class="line"><span style="color:#89DDFF;">  (</span><span style="color:#FFCB6B;">use</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">git push</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> to</span><span style="color:#C3E88D;"> publish</span><span style="color:#C3E88D;"> your</span><span style="color:#C3E88D;"> local</span><span style="color:#C3E88D;"> commits</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> merge</span><span style="color:#C3E88D;"> feature</span></span>
<span class="line"><span style="color:#FFCB6B;">Updating</span><span style="color:#F78C6C;"> 0</span><span style="color:#C3E88D;">e80f97..b2593e6</span></span>
<span class="line"><span style="color:#FFCB6B;">Fast-forward</span></span>
<span class="line"><span style="color:#FFCB6B;"> newFunc.go</span><span style="color:#89DDFF;"> |</span><span style="color:#FFCB6B;"> 1</span><span style="color:#C3E88D;"> +</span></span>
<span class="line"><span style="color:#FFCB6B;"> 1</span><span style="color:#C3E88D;"> file</span><span style="color:#C3E88D;"> changed,</span><span style="color:#F78C6C;"> 1</span><span style="color:#C3E88D;"> insertion</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">+</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>再次查看一下提交历史：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> log</span><span style="color:#C3E88D;"> --oneline</span><span style="color:#C3E88D;"> --graph</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> b2593e6 </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">HEAD</span><span style="color:#BABED8;"> -</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C3E88D;"> master,</span><span style="color:#C3E88D;"> feature</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;"> add new func</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 0e80f97 </span><span style="color:#89DDFF;font-style:italic;">do</span><span style="color:#FFCB6B;"> something</span></span>
<span class="line"><span style="color:#89DDFF;">*</span><span style="color:#BABED8;"> 94c134b init base</span></span></code></pre></div><p>问题解决，master上也是一条直线了。</p><p>最后收个尾，删除掉feature分支：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight vp-code"><code><span class="line"><span style="color:#FFCB6B;">HowiedeiMac:hello</span><span style="color:#C3E88D;"> howie</span><span style="color:#BABED8;">$ </span><span style="color:#C3E88D;">git</span><span style="color:#C3E88D;"> branch</span><span style="color:#C3E88D;"> -d</span><span style="color:#C3E88D;"> feature</span></span>
<span class="line"><span style="color:#FFCB6B;">Deleted</span><span style="color:#C3E88D;"> branch</span><span style="color:#C3E88D;"> feature</span><span style="color:#BABED8;"> (was </span><span style="color:#C3E88D;">b2593e6</span><span style="color:#BABED8;">).</span></span></code></pre></div>`,89),e=[o];function t(c,r,y,D,i,C){return a(),n("div",null,e)}const B=s(p,[["render",t]]);export{E as __pageData,B as default};
